C51 COMPILER V9.00   PWM                                                                   06/08/2020 09:01:32 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE PWM
OBJECT MODULE PLACED IN .\Objects\pwm.obj
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE pwm.c LARGE BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\pwm.lst) OBJECT(.\Ob
                    -jects\pwm.obj)

line level    source

   1          #include "stc8.h"
   2          #include "pwm.h"
   3          
   4          void PWM_Init()
   5          {
   6   1              PWMCFG &= ~0xc0;
   7   1      
   8   1              P_SW2 |= 0x80;
   9   1      
  10   1              PWMCH = 0x5d;
  11   1              PWMCL = 0xc0;
  12   1      
  13   1              PWMCKS &= ~0x1f;//计数为系统时钟 
  14   1      
  15   1              PWM3CR |= 0x80;//GPIO使能为PWM输出
  16   1              PWM3CR |= 0x40;//初始高电平输出
  17   1      
  18   1              PWM3CR &= ~0x18;//P1.3
  19   1              PWM3CR |= 0x08;
  20   1      
  21   1              PWM3CR &= ~0x07;//关闭通道中断、第1个和第2个翻转点中断
  22   1      
  23   1              P_SW2 &= ~0x80;
  24   1      }
  25          
  26          void PWM_Ctrl(double per)
  27          {
  28   1              double temp;
  29   1              unsigned int itemp;
  30   1      
  31   1              temp = 240.0*per;
  32   1              itemp = temp;
  33   1      
  34   1              PWMCR &= ~0x80;
  35   1      
  36   1              P_SW2 |= 0x80; 
  37   1              
  38   1              PWM3T1H = (itemp >> 8);
  39   1              PWM3T1L = itemp;
  40   1      
  41   1              PWM3T2H = 0x5d;
  42   1              PWM3T2L = 0xc0;
  43   1      
  44   1              P_SW2 &= ~0x80;
  45   1      
  46   1              PWMCR |= 0x80;
  47   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    114    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       4
   PDATA SIZE       =   ----    ----
C51 COMPILER V9.00   PWM                                                                   06/08/2020 09:01:32 PAGE 2   

   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
