C51 COMPILER V9.00   DAC                                                                   06/08/2020 09:01:32 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE DAC
OBJECT MODULE PLACED IN .\Objects\dac.obj
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE dac.c LARGE BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\dac.lst) OBJECT(.\Ob
                    -jects\dac.obj)

line level    source

   1          #include "stc8.h"
   2          
   3          sbit scl = P3^5;
   4          sbit sda = P3^6;
   5          
   6          sbit a0 = P5^0;
   7          sbit a1 = P5^1;
   8          
   9          
  10          void InitI2C()
  11          {
  12   1              a0 = 0;
  13   1              a1 = 0;
  14   1      
  15   1              I2CCFG |= 40;
  16   1      
  17   1              I2CCFG &= ~0x03f;
  18   1              I2CCFG |= 63;
  19   1      
  20   1              I2CSLADR = 0x28;
  21   1      
  22   1              I2CMSCR &= ~0x80;
  23   1      
  24   1              I2CCFG |= 0x80;
  25   1      }
  26          
  27          
  28          void WriteI2C(unsigned char var)
  29          {
  30   1              //data+ack
  31   1              I2CTXD = 0x00;
  32   1              I2CMSCR &= ~0x0f;
  33   1              I2CMSCR |= 0x0a;
  34   1      
  35   1              while((I2CMSST & 0x80) == 0x80);
  36   1      
  37   1              //data+ack
  38   1              I2CTXD = var;
  39   1              I2CMSCR &= ~0x0f;
  40   1              I2CMSCR |= 0x0a;
  41   1      
  42   1              while((I2CMSST & 0x80) == 0x80);
  43   1      
  44   1              //stop
  45   1              I2CMSCR &= ~0x0f;
  46   1              I2CMSCR |= 0x06;
  47   1      }
  48          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     98    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
C51 COMPILER V9.00   DAC                                                                   06/08/2020 09:01:32 PAGE 2   

   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
